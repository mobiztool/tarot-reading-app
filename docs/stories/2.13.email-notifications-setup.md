# Story 2.13: Email Notifications Setup (Foundation)

## Status

**Approved**

---

## Story

**As a** developer,  
**I want** email notification infrastructure in place,  
**so that** we can send transactional emails and future marketing emails.

---

## Acceptance Criteria

1. Email service integrated: Supabase Email (default) or SendGrid/Resend for better deliverability
2. Email templates created: welcome email, password reset, email verification
3. Email templates branded: includes app logo, mystical theme colors, consistent styling
4. Welcome email sent automatically after signup: "Welcome to [App Name]"
5. Email verification email: includes magic link to confirm email address
6. Password reset email: includes secure reset link valid for 1 hour
7. Email deliverability tested: emails land in inbox, not spam
8. Unsubscribe link included in all emails (future marketing emails)
9. Email tracking: open rates, click rates tracked via SendGrid/Resend (optional)
10. Foundation for Epic 4: daily reminder emails (infrastructure ready, not yet implemented)

---

## Tasks / Subtasks

- [ ] **Task 1: Choose Email Service** (AC: 1)
  - [ ] Option A: Supabase Email (built-in, simple)
  - [ ] Option B: SendGrid/Resend (better deliverability)
  - [ ] Configure chosen service

- [ ] **Task 2: Design Email Templates** (AC: 2, 3)
  - [ ] Welcome email template
  - [ ] Email verification template
  - [ ] Password reset template
  - [ ] Brand with logo and colors

- [ ] **Task 3: Welcome Email** (AC: 4)
  - [ ] Send after successful signup
  - [ ] Personalized with user name
  - [ ] Include next steps

- [ ] **Task 4: Verification Email** (AC: 5)
  - [ ] Already configured in Story 2.1
  - [ ] Verify template styling

- [ ] **Task 5: Password Reset Email** (AC: 6)
  - [ ] Already configured in Story 2.3
  - [ ] Verify template styling

- [ ] **Task 6: Email Deliverability** (AC: 7)
  - [ ] Configure SPF, DKIM, DMARC
  - [ ] Test emails reach inbox
  - [ ] Check spam scores

- [ ] **Task 7: Unsubscribe Link** (AC: 8)
  - [ ] Add to email footer
  - [ ] Create unsubscribe page
  - [ ] Honor unsubscribe requests

- [ ] **Task 8: Testing** (AC: 1-10)
  - [ ] Send test emails
  - [ ] Verify formatting on email clients
  - [ ] Test deliverability

---

## Dev Notes

**From Stories 2.1, 2.3:** Email templates already partially configured

This story enhances and completes email infrastructure

---

## Change Log

| Date       | Version | Description            | Author           |
| ---------- | ------- | ---------------------- | ---------------- |
| 2026-01-01 | 1.0     | Initial story creation | Sarah (PO Agent) |
