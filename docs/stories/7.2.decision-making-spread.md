# Story 7.2: Decision Making Spread (5 Cards)

## Status
**Ready for Review**

## Story
**As a** premium user, **I want** decision making spread, **so that** I can choose between 2 options clearly.

## Acceptance Criteria
1. Decision spread page (/reading/decision) - Premium
2. 5 positions: Option A pros/cons, Option B pros/cons, Best Path
3. User inputs 2 options before drawing
4. Cards show which option favored
5. Clear recommendation section
6. Save as reading_type: 'decision_making'
7. Premium tier check
8. Analytics tracked
9. Mobile responsive
10. Practical advice for decision

## Tasks / Subtasks
- [x] **Task 1: Route Creation**
  - [x] /reading/decision/page.tsx
  - [x] Premium check
- [x] **Task 2: Schema**
  - [x] Add decision_making to ReadingType
- [x] **Task 3: Option Input**
  - [x] 2 input fields for options
  - [x] Store in question field or separate
- [x] **Task 4: 5-Card Layout**
  - [x] 2 columns (Option A vs B)
  - [x] Best path card centered
- [x] **Task 5: Decision Logic**
  - [x] Interpret cards as pros/cons
  - [x] Recommendation algorithm
- [x] **Task 6: Testing**

## Dev Notes
**Unique:** User provides 2 options to compare
**Premium Value:** Practical decision support
**Layout:** Comparison view

## Dev Agent Record

### Agent Model Used
Claude Opus 4.5 (James - Full Stack Developer)

### Completion Notes
- Created `/reading/decision/page.tsx` with premium gate integration
- Added `decision_making` to ReadingType enum in Prisma schema
- Added 5 Decision Making position labels (dm_option_a_pros, dm_option_a_cons, etc.)
- Updated shuffle.ts with `drawDecisionMakingSpread()` function for 5 cards
- Implemented 2 option input fields with validation
- 2-column comparison layout (Option A vs B) with Best Path centered
- Scoring algorithm: pros upright +1, cons upright -1, reversed inverts
- Recommendation banner with confidence level
- Auto-save with combined options as question
- 21 unit tests passing (card drawing, positions, access control, structure)
- ESLint passing with no errors

### File List
| File | Action | Description |
|------|--------|-------------|
| `apps/web/src/app/reading/decision/page.tsx` | Created | Decision Making spread page with 2-option comparison |
| `apps/web/prisma/schema.prisma` | Modified | Added decision_making to ReadingType, added dm_* position labels |
| `apps/web/src/types/card.ts` | Modified | Added Decision Making position types to PositionLabel |
| `apps/web/src/lib/tarot/shuffle.ts` | Modified | Added drawDecisionMakingSpread(), updated createReadingSession() |
| `apps/web/src/lib/hooks/useTarotReading.ts` | Modified | Added decision to ReadingType |
| `apps/web/src/lib/tarot/positionInterpretations.ts` | Modified | Added DECISION_MAKING_POSITIONS with 5 position contexts |
| `apps/web/src/lib/access-control/spreads.ts` | Modified | Updated route to /reading/decision |
| `apps/web/tests/unit/decision-making.test.ts` | Created | 21 unit tests for Decision Making functionality |

### Debug Log References
None - implementation completed without blocking issues

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-08 | 1.0 | Phase 3 story | Sarah (PO) |
| 2026-01-14 | 1.1 | Implementation complete | James (Dev) |

