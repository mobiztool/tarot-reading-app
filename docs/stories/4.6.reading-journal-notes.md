# Story 4.6: Reading Journal & Personal Notes

## Status

**Approved**

## Story

**As a** logged-in user, **I want** to add notes to readings, **so that** I can reflect on how it relates to my life.

## Acceptance Criteria

1. Notes section on result page
2. Auto-save: debounced
3. Persist to database
4. Private: RLS enforced
5. Rich text: bold, italic, bullets, links
6. Limit: 2000 characters
7. Edit anytime on historical readings
8. Search by notes in history
9. Export as PDF (future)
10. Analytics: % who add notes

## Tasks / Subtasks

- [ ] **Task 1: Notes UI** (AC: 1)
  - [ ] Textarea below interpretation
  - [ ] Character counter
- [ ] **Task 2: Auto-Save** (AC: 2, 3)
  - [ ] Debounce saves (1-2 seconds)
  - [ ] API: PATCH /api/readings/[id]
- [ ] **Task 3: Rich Text** (AC: 5)
  - [ ] Simple WYSIWYG editor
  - [ ] Or markdown support
- [ ] **Task 4: Privacy** (AC: 4)
  - [ ] RLS already enforces
  - [ ] Verify security
- [ ] **Task 5: Search** (AC: 8)
  - [ ] Full-text search in notes
- [ ] **Task 6: Analytics** (AC: 10)
  - [ ] Track: notes_added
- [ ] **Task 7: Testing** (AC: 1-10)
  - [ ] Test save/load
  - [ ] Test privacy

## Dev Notes

**From Story 2.5:** notes field already in readings table
**Engagement:** Notes = higher retention
**Future:** AI insights from notes

## Change Log

| Date       | Version | Description            | Author           |
| ---------- | ------- | ---------------------- | ---------------- |
| 2026-01-01 | 1.0     | Initial story creation | Sarah (PO Agent) |
