# Story 3.1: Social Share Image Generation

## Status

**Approved**

## Story

**As a** user who just completed a reading, **I want** to share my reading result as a beautiful image on social media, **so that** I can share my insights with friends and showcase the app.

## Acceptance Criteria

1. Share image generator using HTML Canvas or server-side generation
2. Image template: mystical background, card image(s), interpretation text, app branding
3. Daily Reading: 1 card, name, brief meaning, watermark
4. 3-Card: 3 cards horizontally, position labels
5. Dimensions: 1080×1080px (Instagram), 1200×630px (Facebook/Twitter)
6. Privacy: exclude question text, no personal details
7. Quality: high-res, <500KB per image
8. Color scheme: consistent branding (purple, gold)
9. Typography: readable fonts, proper contrast
10. Performance: generates in <2 seconds
11. Mobile: works smoothly on mobile
12. Preview: show generated image before sharing

## Tasks / Subtasks

- [ ] **Task 1: Choose Image Generation Method** (AC: 1)
  - [ ] Option A: HTML Canvas API (client-side)
  - [ ] Option B: node-canvas (server-side)
  - [ ] Option C: Vercel OG Image (recommended)
- [ ] **Task 2: Design Image Templates** (AC: 2, 3, 4, 8)
  - [ ] Create templates for daily and 3-card
  - [ ] Include: background, cards, text, logo
- [ ] **Task 3: Implement Generator** (AC: 5, 7, 10)
  - [ ] Create `/api/share/generate` endpoint
  - [ ] Generate images with proper dimensions
  - [ ] Optimize for size and quality
- [ ] **Task 4: Privacy Protection** (AC: 6)
  - [ ] Exclude question text from images
  - [ ] No user identifiable info
- [ ] **Task 5: Mobile Optimization** (AC: 11)
  - [ ] Test on mobile devices
  - [ ] Optimize performance
- [ ] **Task 6: Preview Feature** (AC: 12)
  - [ ] Show preview before download/share
  - [ ] Allow regenerate if needed
- [ ] **Task 7: Testing** (AC: 1-12)
  - [ ] Test both image sizes
  - [ ] Verify quality on social platforms
  - [ ] Performance benchmarks

## Dev Notes

**Tech Stack:** Vercel OG Image or @napi-rs/canvas for server-side generation
**From Stories 1.7-1.8:** Reading data structure known
**Integration:** Used by Story 3.2 (share buttons)

## Change Log

| Date       | Version | Description            | Author           |
| ---------- | ------- | ---------------------- | ---------------- |
| 2026-01-01 | 1.0     | Initial story creation | Sarah (PO Agent) |
