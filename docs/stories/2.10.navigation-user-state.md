# Story 2.10: Navigation & User State Display

## Status

**Approved**

---

## Story

**As a** user (logged in or anonymous),  
**I want** to see my login status in the navigation,  
**so that** I can easily access my profile or login when needed.

---

## Acceptance Criteria

1. Navigation header updated: shows different state for logged-in vs anonymous users
2. Anonymous user: "Login" and "Sign up" buttons in header
3. Logged-in user: profile icon/avatar with dropdown menu
4. Dropdown menu items: "Profile", "History", "Settings", "Logout"
5. Profile icon shows first letter of name or profile picture if uploaded
6. Mobile: hamburger menu includes auth-related items appropriately
7. Active state: current page highlighted in navigation
8. Smooth transitions: login state updates immediately after authentication (no page refresh)
9. Persistent across pages: auth state maintained during navigation
10. Loading state: skeleton or placeholder while checking auth status on initial load

---

## Tasks / Subtasks

- [ ] **Task 1: Update Header Component** (AC: 1, 2, 3)
  - [ ] Modify Header from Story 1.4
  - [ ] Show conditional content based on auth state
  - [ ] Use useAuth hook to get current user

- [ ] **Task 2: Profile Dropdown Menu** (AC: 3, 4, 5)
  - [ ] Create dropdown component (Headless UI)
  - [ ] Show profile picture or initials
  - [ ] Menu items with icons and labels
  - [ ] Implement logout handler

- [ ] **Task 3: Mobile Navigation** (AC: 6)
  - [ ] Update hamburger menu
  - [ ] Show auth items appropriately
  - [ ] Test on mobile devices

- [ ] **Task 4: Active State** (AC: 7)
  - [ ] Highlight current page in nav
  - [ ] Use Next.js usePathname hook

- [ ] **Task 5: Real-time Updates** (AC: 8, 9)
  - [ ] Subscribe to auth state changes
  - [ ] Update UI without page refresh
  - [ ] Handle login/logout smoothly

- [ ] **Task 6: Loading State** (AC: 10)
  - [ ] Show skeleton while checking auth
  - [ ] Quick initial render

- [ ] **Task 7: Testing** (AC: 1-10)
  - [ ] Test both auth states
  - [ ] Test dropdown interactions
  - [ ] Test mobile menu

---

## Dev Notes

**From Story 1.4:** Header component exists

**From Story 2.2:** useAuth hook provides auth state

Updates navigation to be auth-aware

---

## Change Log

| Date       | Version | Description            | Author           |
| ---------- | ------- | ---------------------- | ---------------- |
| 2026-01-01 | 1.0     | Initial story creation | Sarah (PO Agent) |
