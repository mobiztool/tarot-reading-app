# Test Design: Story 7.5 - Premium Spread Layouts

**Story:** 7.5  
**Component:** Reusable Premium Spread Layout Components  
**QA Engineer:** Quinn (Test Architect)  
**Date:** 2026-01-13  
**Risk Level:** HIGH (Foundation for all premium spreads - affects 7.1-7.4)

---

## 1. Test Strategy

### Test Levels
- **Unit Tests** (50%): Layout calculations, positioning logic
- **Component Tests** (40%): Component rendering, props
- **Visual Regression Tests** (10%): Layout appearance

### Focus Areas
- **Reusable components** (used by 4 premium spreads)
- **Flexible positioning** (cross, staff, row, column, grid)
- **Responsive behavior** (desktop → mobile transformation)
- **Animation support** (sequential reveal)
- **Accessibility** (ARIA labels, keyboard navigation)

---

## 2. Test Scenarios

### Scenario 1: SpreadLayout Component (P0)
**Given-When-Then:**
- **Given** SpreadLayout component
- **When** rendered with cards and positions
- **Then** renders all cards in correct positions
- **And** supports multiple layout types

**Test Cases:**
- TC-7.5-001: Component renders without errors
- TC-7.5-002: Accepts cards array prop
- TC-7.5-003: Accepts positions configuration
- TC-7.5-004: Supports layoutType prop (cross, grid, row, etc.)
- TC-7.5-005: Renders correct number of card slots
- TC-7.5-006: Empty state when no cards provided

**Priority:** P0 (Foundation component)

---

### Scenario 2: Cross Formation Layout (P0)
**Given-When-Then:**
- **Given** layoutType="cross"
- **When** rendering 6 cards
- **Then** displays cross formation:
  - Center card
  - Crossed/overlay card
  - Top, bottom, left, right cards

**Test Cases:**
- TC-7.5-010: Cross layout with 6 positions
- TC-7.5-011: Center card positioned correctly
- TC-7.5-012: Overlay card rotated 90deg
- TC-7.5-013: Symmetrical spacing (balanced)
- TC-7.5-014: Card sizes consistent
- TC-7.5-015: Responsive on mobile (stacks vertically)

**Priority:** P0 (Celtic Cross requirement)

---

### Scenario 3: Staff/Column Layout (P0)
**Given-When-Then:**
- **Given** layoutType="column"
- **When** rendering 4 cards
- **Then** displays vertical column
- **And** equal spacing between cards

**Test Cases:**
- TC-7.5-020: Column layout vertical alignment
- TC-7.5-021: Equal spacing between cards
- TC-7.5-022: Cards centered in column
- TC-7.5-023: Top-to-bottom order correct
- TC-7.5-024: Scrollable if exceeds viewport

**Priority:** P0 (Celtic Cross staff)

---

### Scenario 4: Row Layout (P1)
**Given-When-Then:**
- **Given** layoutType="row"
- **When** rendering multiple cards
- **Then** displays horizontal row
- **And** wraps on mobile

**Test Cases:**
- TC-7.5-030: Row layout horizontal alignment
- TC-7.5-031: Equal spacing between cards
- TC-7.5-032: Cards wrap on small screens
- TC-7.5-033: Scrollable horizontal on mobile (optional)

**Priority:** P1 (Simpler spreads)

---

### Scenario 5: Grid Layout (P1)
**Given-When-Then:**
- **Given** layoutType="grid"
- **When** rendering cards
- **Then** displays in grid (2x2, 3x2, etc.)
- **And** responsive columns

**Test Cases:**
- TC-7.5-040: Grid layout with specified columns
- TC-7.5-041: Cards distributed evenly
- TC-7.5-042: Responsive grid (3 cols → 2 cols → 1 col)
- TC-7.5-043: Gap spacing consistent

**Priority:** P1 (Future spreads)

---

### Scenario 6: Custom Layout (P2)
**Given-When-Then:**
- **Given** layoutType="custom"
- **When** providing custom positions array
- **Then** renders cards at specified coordinates
- **And** supports absolute/relative positioning

**Test Cases:**
- TC-7.5-050: Custom position coordinates work
- TC-7.5-051: Supports x, y coordinates
- TC-7.5-052: Supports percentage or pixel values
- TC-7.5-053: Cards don't overlap unexpectedly

**Priority:** P2 (Advanced layouts)

---

### Scenario 7: Position Labels (P0)
**Given-When-Then:**
- **Given** position configuration with labels
- **When** rendering spread
- **Then** each position shows label
- **And** labels in Thai and English

**Test Cases:**
- TC-7.5-060: Position labels display correctly
- TC-7.5-061: Thai labels shown (default)
- TC-7.5-062: English labels available (optional)
- TC-7.5-063: Labels positioned near cards
- TC-7.5-064: Labels readable font size
- TC-7.5-065: Labels don't overlap cards

**Priority:** P0 (User guidance)

---

### Scenario 8: Sequential Card Reveal Animation (P1)
**Given-When-Then:**
- **Given** enableAnimation prop true
- **When** cards drawn
- **Then** cards reveal sequentially
- **And** stagger delay between each

**Test Cases:**
- TC-7.5-070: Animation can be enabled/disabled
- TC-7.5-071: Sequential reveal order 1→N
- TC-7.5-072: Stagger delay configurable (default 0.3s)
- TC-7.5-073: Smooth flip animation
- TC-7.5-074: Animation skipable (optional)
- TC-7.5-075: No animation janking

**Priority:** P1 (Premium polish)

---

### Scenario 9: Responsive Behavior (P0)
**Given-When-Then:**
- **Given** any layout type
- **When** viewport width changes
- **Then** layout adapts appropriately
- **And** remains usable on all screen sizes

**Test Cases:**
- TC-7.5-080: Desktop (>1024px) → full layout
- TC-7.5-081: Tablet (768-1024px) → adapted layout
- TC-7.5-082: Mobile (<768px) → vertical stack
- TC-7.5-083: Breakpoints trigger correctly
- TC-7.5-084: Smooth transition between layouts
- TC-7.5-085: No layout shift during resize
- TC-7.5-086: Touch-friendly on mobile

**Priority:** P0 (Mobile UX)

---

### Scenario 10: Accessibility (P1)
**Given-When-Then:**
- **Given** SpreadLayout component
- **When** using keyboard navigation
- **Then** all cards focusable
- **And** ARIA labels present

**Test Cases:**
- TC-7.5-090: Cards keyboard navigable (Tab)
- TC-7.5-091: ARIA labels on positions
- TC-7.5-092: Screen reader announces position names
- TC-7.5-093: Focus indicators visible
- TC-7.5-094: Semantic HTML structure

**Priority:** P1 (Accessibility)

---

## 3. Component Test Scenarios

### Scenario 11: CardSlot Component (P0)
**Test Cases:**
- TC-7.5-100: Renders placeholder when no card
- TC-7.5-101: Shows card when provided
- TC-7.5-102: Handles reversed card styling
- TC-7.5-103: Click handler works
- TC-7.5-104: Hover state displays

**Priority:** P0

---

### Scenario 12: PositionLabel Component (P1)
**Test Cases:**
- TC-7.5-110: Displays position name
- TC-7.5-111: Supports Thai/English toggle
- TC-7.5-112: Styling customizable
- TC-7.5-113: Positioning flexible

**Priority:** P1

---

## 4. Integration Test Scenarios

### Scenario 13: Used by Celtic Cross (P0)
**Given-When-Then:**
- **Given** Celtic Cross spread (7.1)
- **When** using SpreadLayout
- **Then** renders 10 cards correctly
- **And** cross + staff layout works

**Test Cases:**
- TC-7.5-120: Celtic Cross integration works
- TC-7.5-121: 10 positions all render
- TC-7.5-122: Complex layout no errors

**Priority:** P0

---

### Scenario 14: Used by Decision Making (P1)
**Test Cases:**
- TC-7.5-130: Decision Making (5 cards) works
- TC-7.5-131: Custom 2-option layout renders

**Priority:** P1

---

### Scenario 15: Used by Self Discovery (P1)
**Test Cases:**
- TC-7.5-140: Self Discovery (5 cards) works
- TC-7.5-141: Cross layout with 5 cards

**Priority:** P1

---

### Scenario 16: Used by Relationship Deep Dive (P1)
**Test Cases:**
- TC-7.5-150: Relationship (7 cards) works
- TC-7.5-151: Two-person layout renders

**Priority:** P1

---

## 5. Visual Regression Test Scenarios

### Scenario 17: Layout Consistency (P2)
**Test Cases:**
- TC-7.5-160: Screenshot cross layout → matches baseline
- TC-7.5-161: Screenshot column layout → matches baseline
- TC-7.5-162: Screenshot row layout → matches baseline
- TC-7.5-163: Screenshot mobile layouts → match baseline

**Tools:** Playwright visual comparison

**Priority:** P2

---

## 6. Test Data Requirements

### Layout Configurations
```javascript
{
  cross: {
    type: "cross",
    positions: [
      { id: 1, x: "50%", y: "50%" },  // Center
      { id: 2, x: "50%", y: "50%", rotate: 90 },  // Crossed
      { id: 3, x: "30%", y: "50%" },  // Left
      { id: 4, x: "70%", y: "50%" },  // Right
      { id: 5, x: "50%", y: "30%" },  // Top
      { id: 6, x: "50%", y: "70%" },  // Bottom
    ]
  },
  column: {
    type: "column",
    gap: "2rem",
    positions: 4
  },
  row: {
    type: "row",
    gap: "1.5rem",
    wrap: true
  }
}
```

---

## 7. Risk Coverage Matrix

| Risk | Severity | Test Coverage | Mitigation |
|------|----------|---------------|------------|
| Layout breaks spreads | HIGH | TC-7.5-120-151 | Integration tests with all spreads |
| Non-responsive | MEDIUM | TC-7.5-080-086 | Responsive tests all breakpoints |
| Performance issues | MEDIUM | Animation tests | Performance monitoring |
| Accessibility gaps | LOW | TC-7.5-090-094 | A11y testing |

---

## 8. Test Execution Plan

### Phase 1: Core Components (Day 1-2)
- SpreadLayout component tests
- CardSlot component tests
- Layout type tests (cross, column, row, grid)

### Phase 2: Responsive & Animation (Day 2)
- Responsive behavior all breakpoints
- Animation tests
- Visual regression baseline

### Phase 3: Integration (Day 3)
- Integration with all 4 premium spreads
- E2E layout rendering

---

## 9. Success Criteria

✅ **Component Quality:**
- [ ] All layout types render correctly
- [ ] Props validated and typed
- [ ] No console errors/warnings

✅ **Reusability:**
- [ ] Used successfully by Stories 7.1-7.4
- [ ] Configuration flexible
- [ ] Easy to extend

✅ **Responsiveness:**
- [ ] Works desktop, tablet, mobile
- [ ] Smooth transitions
- [ ] Touch-friendly

✅ **Overall:**
- [ ] Code coverage >90%
- [ ] All P0 tests passing
- [ ] Visual regression baseline established

---

**Estimated Effort:** 3 days

**Critical Dependency:** Must be completed before Stories 7.1-7.4
