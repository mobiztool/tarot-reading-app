# Test Design: Story 8.2 - Chakra Alignment Spread (VIP-Only)

**Story:** 8.2  
**Component:** Chakra Alignment Spread - Energy Balance Reading  
**QA Engineer:** Quinn (Test Architect)  
**Date:** 2026-01-13  
**Risk Level:** MEDIUM (Spiritual content accuracy important)

---

## 1. Test Strategy

### Test Levels
- **Unit Tests** (40%): Chakra logic, position mapping
- **Component Tests** (30%): 7-chakra layout, colors
- **Integration Tests** (20%): VIP access, database
- **E2E Tests** (10%): Complete chakra reading flow

### Focus Areas
- **VIP-only access** control
- **Chakra system accuracy** (7 chakras correct)
- **Spiritual content appropriateness**
- **Vertical alignment** layout (Root to Crown)
- **Chakra colors** in UI

---

## 2. Test Scenarios

### Scenario 1: VIP-Only Access Control (P0)
**Given-When-Then:**
- **Given** user is Pro tier (not VIP)
- **When** navigates to /reading/chakra-alignment
- **Then** VIP gate displays
- **And** shows VIP benefits for spiritual content

**Test Cases:**
- TC-8.2-001: FREE user → VIP gate shown
- TC-8.2-002: BASIC user → VIP gate shown
- TC-8.2-003: PRO user → VIP gate shown (VIP required!)
- TC-8.2-004: VIP user → access granted, page loads
- TC-8.2-005: Canceled VIP in grace → access granted
- TC-8.2-006: Expired VIP → gate shown

**Priority:** P0 (VIP-exclusive)

---

### Scenario 2: 7-Chakra System Accuracy (P0)
**Given-When-Then:**
- **Given** chakra alignment spread
- **When** reviewing chakra definitions
- **Then** all 7 chakras accurate:
  1. Root (Muladhara) - Red
  2. Sacral (Svadhisthana) - Orange
  3. Solar Plexus (Manipura) - Yellow
  4. Heart (Anahata) - Green
  5. Throat (Vishuddha) - Blue
  6. Third Eye (Ajna) - Indigo
  7. Crown (Sahasrara) - Violet/White

**Test Cases:**
- TC-8.2-010: All 7 chakras defined
- TC-8.2-011: Chakra names correct (Sanskrit + Thai + English)
- TC-8.2-012: Chakra colors accurate
- TC-8.2-013: Chakra order correct (Root at bottom, Crown at top)
- TC-8.2-014: Body location associations correct
- TC-8.2-015: Chakra meanings/themes accurate
- TC-8.2-016: Expert review by yoga/spiritual practitioner

**Priority:** P0 (Accuracy for spiritual content)

---

### Scenario 3: 7-Card Vertical Layout (P0)
**Given-When-Then:**
- **Given** VIP user draws chakra alignment
- **When** 7 cards display
- **Then** vertical column layout:
  - Card 7 (Crown) - Top
  - Card 6 (Third Eye)
  - Card 5 (Throat)
  - Card 4 (Heart) - Center
  - Card 3 (Solar Plexus)
  - Card 2 (Sacral)
  - Card 1 (Root) - Bottom

**Test Cases:**
- TC-8.2-020: 7 cards in vertical alignment
- TC-8.2-021: Order bottom-to-top (Root → Crown)
- TC-8.2-022: Equal spacing between cards
- TC-8.2-023: Chakra color indicators visible
- TC-8.2-024: Body diagram overlay (optional)
- TC-8.2-025: Mobile: vertical scroll smooth
- TC-8.2-026: Desktop: fits in viewport

**Priority:** P0 (Core UX)

---

### Scenario 4: Chakra Colors in UI (P1)
**Given-When-Then:**
- **Given** chakra alignment display
- **When** viewing each position
- **Then** chakra color shown
- **And** color-coded indicators

**Test Cases:**
- TC-8.2-030: Root chakra → red indicator
- TC-8.2-031: Sacral chakra → orange indicator
- TC-8.2-032: Solar Plexus → yellow indicator
- TC-8.2-033: Heart chakra → green indicator
- TC-8.2-034: Throat chakra → blue indicator
- TC-8.2-035: Third Eye → indigo indicator
- TC-8.2-036: Crown chakra → violet/white indicator
- TC-8.2-037: Colors accessible (not sole information indicator)

**Priority:** P1 (Visual enhancement)

---

### Scenario 5: Card Drawing Logic (P0)
**Given-When-Then:**
- **Given** chakra alignment requested
- **When** drawing 7 cards
- **Then** one card per chakra
- **And** all unique cards

**Test Cases:**
- TC-8.2-040: Exactly 7 cards drawn
- TC-8.2-041: All cards unique (no duplicates)
- TC-8.2-042: Random selection from 78-card deck
- TC-8.2-043: Reversed status assigned (50/50)
- TC-8.2-044: Cards appropriate for chakra work

**Priority:** P0

---

### Scenario 6: Chakra-Tarot Integration Content (P0)
**Given-When-Then:**
- **Given** card drawn for each chakra
- **When** viewing interpretation
- **Then** combines chakra meaning + tarot card
- **And** provides energy balance insight

**Test Cases:**
- TC-8.2-050: Each position combines chakra + card meaning
- TC-8.2-051: Root chakra content focuses on grounding/survival
- TC-8.2-052: Heart chakra content focuses on love/compassion
- TC-8.2-053: Crown chakra content focuses on spirituality/connection
- TC-8.2-054: Content references energy/balance concepts
- TC-8.2-055: Thai spiritual terminology appropriate
- TC-8.2-056: Overall balance/imbalance assessment provided

**Priority:** P0 (Content quality)

---

### Scenario 7: Combined Energy Reading Summary (P1)
**Given-When-Then:**
- **Given** all 7 chakras interpreted
- **When** viewing summary
- **Then** holistic energy assessment
- **And** balance/imbalance identified
- **And** guidance for alignment

**Test Cases:**
- TC-8.2-060: Summary synthesizes all 7 chakras
- TC-8.2-061: Identifies blocked/imbalanced chakras
- TC-8.2-062: Provides alignment guidance
- TC-8.2-063: 200-300 words comprehensive
- TC-8.2-064: Thai language natural

**Priority:** P1

---

### Scenario 8: Save Reading (P0)
**Given-When-Then:**
- **Given** chakra alignment complete
- **When** saving to database
- **Then** reading_type = "chakra_alignment"
- **And** VIP-only label
- **And** appears in history

**Test Cases:**
- TC-8.2-070: Saves with correct reading_type
- TC-8.2-071: All 7 cards saved with chakra positions
- TC-8.2-072: Chakra labels preserved
- TC-8.2-073: VIP badge in history
- TC-8.2-074: Can reload saved reading
- TC-8.2-075: Chakra colors preserved

**Priority:** P0

---

### Scenario 9: Cultural/Spiritual Sensitivity (P0)
**Given-When-Then:**
- **Given** chakra system from Hindu/Buddhist tradition
- **When** presenting in Thai/Western context
- **Then** respectful and appropriate
- **And** not appropriating or misrepresenting

**Test Cases:**
- TC-8.2-080: Respectful presentation of chakra system
- TC-8.2-081: Not oversimplified or trivialized
- TC-8.2-082: Cultural context acknowledged
- TC-8.2-083: Thai Buddhist context considered
- TC-8.2-084: Expert review by yoga/spiritual practitioner

**Priority:** P0 (Cultural respect)

---

## 3. Integration Test Scenarios

### Scenario 10: API Integration (P0)
**Test Cases:**
- TC-8.2-090: POST /api/readings/draw supports chakra_alignment
- TC-8.2-091: Returns 7 cards with chakra positions
- TC-8.2-092: VIP tier checked server-side
- TC-8.2-093: Returns 403 if not VIP

**Priority:** P0

---

## 4. E2E Test Scenarios

### Scenario 11: Complete Chakra Reading Flow (P0)
**Steps:**
1. Login as VIP user
2. Navigate to Chakra Alignment
3. Read chakra system introduction
4. Click "Begin Chakra Reading"
5. Watch 7-card vertical reveal (Root → Crown)
6. View each chakra interpretation
7. Read overall balance assessment
8. Save reading
9. View in history with chakra colors

**Priority:** P0

---

## 5. Test Data Requirements

### Chakra Definitions
```javascript
{
  chakras: [
    { id: 1, name: "Root", nameTh: "รากฐาน", color: "red", sanskrit: "Muladhara" },
    { id: 2, name: "Sacral", nameTh: "สัคราล", color: "orange", sanskrit: "Svadhisthana" },
    { id: 3, name: "Solar Plexus", nameTh: "ท้องน้อย", color: "yellow", sanskrit: "Manipura" },
    { id: 4, name: "Heart", nameTh: "หัวใจ", color: "green", sanskrit: "Anahata" },
    { id: 5, name: "Throat", nameTh: "คอ", color: "blue", sanskrit: "Vishuddha" },
    { id: 6, name: "Third Eye", nameTh: "ตาที่สาม", color: "indigo", sanskrit: "Ajna" },
    { id: 7, name: "Crown", nameTh: "มงกุฎ", color: "violet", sanskrit: "Sahasrara" },
  ]
}
```

---

## 6. Success Criteria

✅ **VIP Access:**
- [ ] Only VIP users can access
- [ ] Server-side validation working
- [ ] Clear upgrade path from Pro

✅ **Chakra Accuracy:**
- [ ] All 7 chakras defined correctly
- [ ] Colors, names, meanings accurate
- [ ] Expert reviewed and approved

✅ **Content Quality:**
- [ ] Chakra-tarot integration meaningful
- [ ] Energy balance guidance helpful
- [ ] Culturally respectful

✅ **UX:**
- [ ] Vertical layout intuitive
- [ ] Chakra colors enhance understanding
- [ ] Mobile responsive

✅ **Overall:**
- [ ] All P0 tests passing
- [ ] Code coverage >85%
- [ ] User satisfaction >4.5/5

---

**Estimated Effort:** 3-4 days

**Special Requirements:**
- Yoga/spiritual practitioner review
- Thai Buddhist cultural sensitivity check

**Dependencies:**
- Story 7.5 (Layouts) - vertical column layout
- Story 7.6 (Content) - chakra-specific interpretations
